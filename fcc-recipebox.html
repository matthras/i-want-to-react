
<!--
	RecipeBox Component
	> RecipeList Component (Look up how to create a to-do list)
	> Add Recipe Button - should modify state of RecipeBox component

	How do we store recipe data as JSON in localStorage?

	localStorage.fccRecipeBox = {
		[{
			name: 'Pumpkin Pie',
			ingredients: 'pumpkin puree, sweetened condensed milk, eggs, pumpkin pie spice, pie crust'
		},
		{
			name: 'Spaghetti',
			ingredients: 'spaghetti noodles, tomato sauce, meatballs'
		},
		etc.]
	}
	-->

<head>
	<!-- Use Foundation for Accordian for list styling -->
</head>
<body>
	<div id="root"></div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.18.1/babel.min.js"></script>

	<script type="text/babel">

	class RecipeBox extends React.Component {
		constructor(props) {
			super(props);
			this.state = {data: [{
					id: 1,
					name: 'Pumpkin Pie',
					ingredients: 'pumpkin puree, sweetened condensed milk, eggs, pumpkin pie spice, pie crust'
				},
				{
					id: 2,
					name: 'Spaghetti',
					ingredients: 'spaghetti noodles, tomato sauce, meatballs'
				}]
			}
			this.addRecipe = this.addRecipe.bind(this);
			this.deleteRecipe = this.deleteRecipe.bind(this);
		}
		// Delete a recipe
		deleteRecipe(item) {
			var items = this.state.data.filter(function(itm){
				return item.id !== itm.id;
			});
			this.setState({data: items})
		}

		addRecipe(item) {
			var dummyStatedata = this.state.data;
			dummyStatedata.push(item);
			this.setState({data: dummyStatedata})
		}
		render() {
			return (
				<div>
					<RecipeList recipedata={this.state.data} onRemove={this.deleteRecipe}/>
					<AddRecipe onAdd={this.addRecipe} />
				</div>
			)
		}
	}

	class RecipeList extends React.Component {
		remove(recipe){
			return function(e) {
				e.preventDefault();
				return this.props.onRemove(recipe);
			}.bind(this);
		}
		render() {
			var recipeData = this.props.recipedata.map(function(recipe,i) {
				return (
					<li key={i}>{recipe.name}
						<RecipeIngredients ingredients={recipe.ingredients.split(', ')} />
						<button data-id={recipe.id} onClick={this.remove(recipe)}>Remove</button>
					</li>
				)}.bind(this));
			return (
				<ul>
						{recipeData}
				</ul>
			)
		}
	}

	class RecipeIngredients extends React.Component{
	render() {
		var ingredients = this.props.ingredients.map(function(ingredient) {
			return(
				<li>{ingredient}</li>
			)
		})
		return (
			<ul>
				{ingredients}
			</ul>
		)
	}
	}

	class AddRecipe extends React.Component{
		addRecipeComponentButton() {
			return function(e) {
				e.preventDefault();
				var recipe = {name: document.getElementById("recipeInput").value, ingredients: document.getElementById("recipeIngredients").value}
				return this.props.onAdd(recipe);
			}.bind(this);
		}
		render() {
			return(
				<div>
					<p><strong>Recipe Name</strong> <br />
					<input type="text" id="recipeInput" /></p>
					<p><strong>Ingredients</strong> <br />
					<input type="text" id="recipeIngredients" /></p>
					<button onClick={this.addRecipeComponentButton()}>Add Recipe</button>
				</div>
			)
	}}

	ReactDOM.render(
		<RecipeBox />,
		document.getElementById('root')
	)

	</script>
</body>
